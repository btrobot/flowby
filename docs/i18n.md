# Flowby DSL å›½é™…åŒ–ï¼ˆi18nï¼‰æ”¯æŒ

## æ¦‚è¿°

Flowby DSL v6.3+ æ”¯æŒå¤šè¯­è¨€é”™è¯¯æ¶ˆæ¯å’Œç”¨æˆ·ç•Œé¢æ–‡æœ¬ã€‚

**æ”¯æŒçš„è¯­è¨€ï¼š**
- `zh` - ä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰
- `en` - English

---

## ä½¿ç”¨æ–¹æ³•

### æ–¹å¼ 1ï¼šç¯å¢ƒå˜é‡ï¼ˆæ¨èï¼‰

```bash
# è®¾ç½®ä¸ºè‹±æ–‡
export FLOWBY_LANG=en
flowby script.flow

# è®¾ç½®ä¸ºä¸­æ–‡
export FLOWBY_LANG=zh
flowby script.flow

# Windows PowerShell
$env:FLOWBY_LANG="en"
flowby script.flow
```

### æ–¹å¼ 2ï¼šå‘½ä»¤è¡Œå‚æ•°

```bash
# ä½¿ç”¨è‹±æ–‡é”™è¯¯æ¶ˆæ¯
flowby script.flow --lang en

# ä½¿ç”¨ä¸­æ–‡é”™è¯¯æ¶ˆæ¯ï¼ˆé»˜è®¤ï¼‰
flowby script.flow --lang zh
```

### æ–¹å¼ 3ï¼šç¼–ç¨‹æ–¹å¼

```python
from flowby.i18n import set_language, get_message

# åˆ‡æ¢åˆ°è‹±æ–‡
set_language('en')

# è·å–æ¶ˆæ¯
msg = get_message('lexer.illegal_character', char='@')
# è¾“å‡º: "Illegal character: '@'"
```

---

## æ¶ˆæ¯ç¤ºä¾‹å¯¹æ¯”

### Lexer é”™è¯¯

**ä¸­æ–‡ï¼š**
```
[è¯æ³•é”™è¯¯] åœ¨ç¬¬ 10 è¡Œç¬¬ 5 åˆ—: éæ³•å­—ç¬¦: '@'
æç¤º: æ£€æŸ¥ç‰¹æ®Šå­—ç¬¦å’Œæ ‡ç‚¹ç¬¦å·
```

**English:**
```
[Lexer Error] at line 10, column 5: Illegal character: '@'
help: Check special characters and punctuation
```

### Parser é”™è¯¯

**ä¸­æ–‡ï¼š**
```
[è¯­æ³•é”™è¯¯] åœ¨ç¬¬ 15 è¡Œ: æœªå®šä¹‰çš„å˜é‡ 'username'ï¼ˆVR-001 è¿è§„ï¼‰
æç¤º: åœ¨ä½¿ç”¨å‰å…ˆç”¨ 'let' æˆ– 'const' å£°æ˜å˜é‡
```

**English:**
```
[Parser Error] at line 15: Undefined variable 'username' (VR-001 violation)
help: Declare variable with 'let' or 'const' before use
```

### Execution é”™è¯¯

**ä¸­æ–‡ï¼š**
```
[æ‰§è¡Œé”™è¯¯] åœ¨ç¬¬ 20 è¡Œ: æ‰¾ä¸åˆ°å…ƒç´ : #submit-button
æç¤º: æ£€æŸ¥é€‰æ‹©å™¨æ˜¯å¦æ­£ç¡®ï¼Œå…ƒç´ æ˜¯å¦å­˜åœ¨
```

**English:**
```
[Execution Error] at line 20: Element not found: #submit-button
help: Check if selector is correct and element exists
```

---

## æ·»åŠ æ–°è¯­è¨€

ç¼–è¾‘ `src/flowby/i18n/messages.py`ï¼š

```python
MESSAGES = {
    'lexer.illegal_character': {
        'zh': "éæ³•å­—ç¬¦: '{char}'",
        'en': "Illegal character: '{char}'",
        'ja': "ä¸æ­£ãªæ–‡å­—: '{char}'",  # æ·»åŠ æ—¥è¯­
    },
    # ...
}
```

---

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„é”™è¯¯æ¶ˆæ¯é”®

1. åœ¨ `messages.py` ä¸­æ·»åŠ æ¶ˆæ¯é”®ï¼š
   ```python
   'parser.new_error': {
       'zh': "æ–°çš„é”™è¯¯æ¶ˆæ¯: {param}",
       'en': "New error message: {param}"
   }
   ```

2. åœ¨ä»£ç ä¸­ä½¿ç”¨ï¼š
   ```python
   from flowby.i18n import get_message

   msg = get_message('parser.new_error', param='value')
   ```

### æ¶ˆæ¯é”®å‘½åçº¦å®š

- æ ¼å¼ï¼š`<æ¨¡å—>.<é”™è¯¯ç±»å‹>`
- ç¤ºä¾‹ï¼š
  - `lexer.illegal_character`
  - `parser.undefined_variable`
  - `exec.element_not_found`
  - `warning.unused_variable`

---

## å½“å‰çŠ¶æ€

âœ… **å·²å®Œæˆï¼š**
- å›½é™…åŒ–åŸºç¡€è®¾æ–½ï¼ˆi18n æ¨¡å—ï¼‰
- æ¶ˆæ¯å­—å…¸ï¼ˆ50+ æ¡æ¶ˆæ¯ï¼‰
- ç¯å¢ƒå˜é‡æ”¯æŒ
- CLI å‚æ•°æ”¯æŒ

â³ **è¿›è¡Œä¸­ï¼š**
- é€æ­¥è¿ç§»ç°æœ‰é”™è¯¯æ¶ˆæ¯åˆ°å›½é™…åŒ–ç³»ç»Ÿ

ğŸ“ **æœªæ¥è®¡åˆ’ï¼š**
- æ”¯æŒæ›´å¤šè¯­è¨€ï¼ˆæ—¥è¯­ã€éŸ©è¯­ã€æ³•è¯­ç­‰ï¼‰
- ç”¨æˆ·è‡ªå®šä¹‰æ¶ˆæ¯æ–‡ä»¶
- åœ¨çº¿æ¶ˆæ¯æ›´æ–°

---

## æ³¨æ„äº‹é¡¹

1. **é»˜è®¤è¯­è¨€**ï¼šå¦‚æœæœªè®¾ç½® `FLOWBY_LANG`ï¼Œé»˜è®¤ä½¿ç”¨ä¸­æ–‡
2. **å›é€€æœºåˆ¶**ï¼šå¦‚æœæ¶ˆæ¯é”®ä¸å­˜åœ¨ï¼Œä¼šå›é€€åˆ°ä¸­æ–‡æ¶ˆæ¯
3. **æ€§èƒ½**ï¼šæ¶ˆæ¯ç³»ç»Ÿä½¿ç”¨å­—å…¸æŸ¥æ‰¾ï¼Œæ€§èƒ½å¼€é”€å¯å¿½ç•¥ä¸è®¡

---

**ç‰ˆæœ¬**: v6.3+
**æ–‡æ¡£æ›´æ–°**: 2025-12-01
