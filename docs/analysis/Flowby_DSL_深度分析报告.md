# Flowby DSL æ·±åº¦åˆ†ææŠ¥å‘Š

> **åˆ†ææ—¥æœŸ**: 2025-12-01
> **DSL ç‰ˆæœ¬**: v5.1
> **åˆ†æç›®æ ‡**: å…¨é¢å‰–æ Flowby çš„è¯­æ³•è¯­ä¹‰ç‰¹ç‚¹ï¼Œå¹¶ä¸ä¸šç•Œç°æœ‰è¯­è¨€/DSL è¿›è¡Œå¯¹æ¯”è¯„ä»·

---

## ç›®å½•

1. [æ ¸å¿ƒè¯­æ³•è¯­ä¹‰ç‰¹ç‚¹](#1-æ ¸å¿ƒè¯­æ³•è¯­ä¹‰ç‰¹ç‚¹)
2. [ç±»å‹ç³»ç»Ÿä¸è¯­ä¹‰æ¨¡å‹](#2-ç±»å‹ç³»ç»Ÿä¸è¯­ä¹‰æ¨¡å‹)
3. [æ¶æ„è®¾è®¡å“²å­¦](#3-æ¶æ„è®¾è®¡å“²å­¦)
4. [ä¸ç°æœ‰è¯­è¨€/DSL å¯¹æ¯”](#4-ä¸ç°æœ‰è¯­è¨€dsl-å¯¹æ¯”)
5. [ä¼˜åŠ¿åˆ†æ](#5-ä¼˜åŠ¿åˆ†æ)
6. [åŠ£åŠ¿ä¸æ”¹è¿›ç©ºé—´](#6-åŠ£åŠ¿ä¸æ”¹è¿›ç©ºé—´)
7. [é€‚ç”¨åœºæ™¯å®šä½](#7-é€‚ç”¨åœºæ™¯å®šä½)
8. [åˆ›æ–°ç‚¹æ€»ç»“](#8-åˆ›æ–°ç‚¹æ€»ç»“)

---

## 1. æ ¸å¿ƒè¯­æ³•è¯­ä¹‰ç‰¹ç‚¹

### 1.1 è¯­æ³•é£æ ¼ï¼šPython æ··è¡€çš„å£°æ˜å¼ DSL

**æ ¸å¿ƒç‰¹å¾**:
```flow
# Python é£æ ¼çš„ç¼©è¿›å—
step "ç”¨æˆ·ç™»å½•":
    if user_type == "admin":
        navigate to admin_url
    else:
        navigate to user_url

    # å£°æ˜å¼çš„æµè§ˆå™¨æ“ä½œ
    type email into "#email"
    click "#submit"

    # è¯­ä¹‰åŒ–çš„æ–­è¨€
    assert url contains "dashboard"
```

**è¯­æ³•åŸºå› å›¾è°±**:
```
Flowby = Python ç¼©è¿›è¯­æ³•
       + Gherkin è¯­ä¹‰åŒ–å…³é”®è¯
       + Ansible å£°æ˜å¼æ“ä½œ
       + JavaScript è¡¨è¾¾å¼ç³»ç»Ÿ
       + OpenAPI èµ„æºæŠ½è±¡
```

### 1.2 è¯­æ³•å±‚æ¬¡ï¼šä¸‰å±‚è¯­ä¹‰æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Layer 3: ä¸šåŠ¡è¯­ä¹‰å±‚ (Business Semantics)   â”‚
â”‚  - step "æ­¥éª¤åç§°"                           â”‚
â”‚  - assert url contains "dashboard"          â”‚
â”‚  - wait for element "#loading" to be hidden â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 2: é¢†åŸŸæ“ä½œå±‚ (Domain Operations)    â”‚
â”‚  - navigate to URL                          â”‚
â”‚  - click selector                           â”‚
â”‚  - select input where type = "email"        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Layer 1: é€šç”¨ç¼–ç¨‹å±‚ (General Programming)  â”‚
â”‚  - let/const å˜é‡å£°æ˜                        â”‚
â”‚  - if/for/while æ§åˆ¶æµ                       â”‚
â”‚  - function ç”¨æˆ·å‡½æ•°                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ç‰¹ç‚¹**:
1. **Layer 1**: å®Œæ•´çš„é€šç”¨ç¼–ç¨‹èƒ½åŠ›ï¼ˆå˜é‡ã€æ§åˆ¶æµã€å‡½æ•°ï¼‰
2. **Layer 2**: é¢†åŸŸç‰¹å®šçš„å£°æ˜å¼æ“ä½œï¼ˆWeb è‡ªåŠ¨åŒ–ã€API è°ƒç”¨ï¼‰
3. **Layer 3**: ä¸šåŠ¡è¯­ä¹‰çš„è‡ªç„¶è¯­è¨€åŒ–ï¼ˆstepã€assertã€wait forï¼‰

### 1.3 å…³é”®è¯­æ³•åˆ›æ–°

#### (1) è‡ªç„¶è¯­è¨€åŒ–çš„æ“ä½œè¯­å¥

**ä¼ ç»Ÿä»£ç ** vs **Flowby**:
```python
# Playwright (Python)
page.locator("#email").fill("user@example.com")
page.locator("#password").fill("password123")
page.locator("#submit").click()
page.wait_for_url("**/dashboard")

# Flowby
type "user@example.com" into "#email"
type "password123" into "#password"
click "#submit"
wait for navigation to "/dashboard"
```

**è¯­ä¹‰ä¼˜åŠ¿**: ä»£ç å¯è¯»æ€§æ¥è¿‘ Gherkinï¼Œä½†ä¿ç•™äº†å®Œæ•´çš„ç¼–ç¨‹èƒ½åŠ›ã€‚

#### (2) è¡¨è¾¾å¼æ— å¤„ä¸åœ¨

```flow
# æ‰€æœ‰æ“ä½œéƒ½æ”¯æŒè¡¨è¾¾å¼
navigate to f"{base_url}/users/{user_id}"
type credentials.password into password_field
click button_selectors[index]
wait (retry_count * 2) s

# WHERE å­å¥æ”¯æŒå¤æ‚è¡¨è¾¾å¼
select input where id = "field-" + (index * 10)
select button where data-user = user.id + suffix
```

**æŠ€æœ¯ç‰¹ç‚¹**: å®Œæ•´çš„è¡¨è¾¾å¼æ±‚å€¼å™¨ï¼Œæ”¯æŒï¼š
- ç®—æœ¯è¿ç®—: `+`, `-`, `*`, `/`, `%`
- é€»è¾‘è¿ç®—: `and`, `or`, `not`
- æ¯”è¾ƒè¿ç®—: `==`, `!=`, `<`, `>`, `<=`, `>=`
- æˆå‘˜è®¿é—®: `obj.property`, `arr[index]`
- f-string: `f"Hello {name}"`
- çŸ­è·¯æ±‚å€¼: `a and b`, `a or b`

#### (3) æ··åˆå¼ç±»å‹ç³»ç»Ÿ

```flow
# åŠ¨æ€ç±»å‹ï¼ˆPython é£æ ¼ï¼‰
let count = 10              # Number
let name = "Alice"          # String
let active = True           # Boolean
let data = None             # None

# ç»“æ„åŒ–ç±»å‹ï¼ˆJavaScript é£æ ¼ï¼‰
let user = {
    name: "Bob",
    age: 30,
    tags: ["admin", "active"]
}

# OpenAPI ç±»å‹æ¨æ–­ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
let api_user = user_api.getUser(userId=123)
# user_api è‡ªåŠ¨æ¨æ–­è¿”å›ç±»å‹ä¸º User schema
```

**ç±»å‹ç‰¹ç‚¹**:
- **è¿è¡Œæ—¶åŠ¨æ€ç±»å‹**: æ— ç±»å‹å£°æ˜ï¼ŒPython é£æ ¼
- **ç»“æ„åŒ–å¯¹è±¡**: å­—å…¸å’Œåˆ—è¡¨çš„ç›´æ¥æ”¯æŒ
- **éšå¼ç±»å‹åè®®**: OpenAPI schema æä¾›ç±»å‹çº¦æŸ

### 1.4 ä½œç”¨åŸŸæ¨¡å‹ï¼šæ··åˆé™æ€/åŠ¨æ€ä½œç”¨åŸŸ

```flow
# å…¨å±€ä½œç”¨åŸŸ
let global_var = 100

function outer():
    # å‡½æ•°ä½œç”¨åŸŸ
    let outer_var = 200

    function inner():
        # é—­åŒ…ä½œç”¨åŸŸï¼ˆæ•è· outer_varï¼‰
        return outer_var + global_var

    return inner

# å¾ªç¯ä½œç”¨åŸŸ
for item in items:
    # item æ˜¯å¾ªç¯å˜é‡ï¼Œä»…åœ¨å¾ªç¯å†…å¯è§
    let processed = process(item)  # processed åœ¨å¾ªç¯å¤–ä¸å¯è§

# æ­¥éª¤ä½œç”¨åŸŸï¼ˆä¸šåŠ¡è¯­ä¹‰ï¼‰
step "æ•°æ®å¤„ç†":
    let result = process_data()
    # result ä»…åœ¨ step å—å†…å¯è§
```

**ä½œç”¨åŸŸè§„åˆ™**:
1. **è¯æ³•ä½œç”¨åŸŸ**: å‡½æ•°é—­åŒ…æ•è·å¤–å±‚å˜é‡ï¼ˆJavaScript é£æ ¼ï¼‰
2. **å—çº§ä½œç”¨åŸŸ**: step/for/while åˆ›å»ºç‹¬ç«‹ä½œç”¨åŸŸï¼ˆPython é£æ ¼ï¼‰
3. **ç¬¦å·è¡¨æ ˆ**: Parser é˜¶æ®µæ„å»ºï¼Œæ”¯æŒç¼–è¯‘æ—¶æ£€æŸ¥

### 1.5 VR è¯­ä¹‰éªŒè¯è§„åˆ™ï¼ˆParser-Stage Semanticsï¼‰

**åˆ›æ–°ç‚¹**: åœ¨ **Parser é˜¶æ®µ** è¿›è¡Œè¯­ä¹‰æ£€æŸ¥ï¼Œè€Œéè¿è¡Œæ—¶ã€‚

```flow
# VR-001: å˜é‡æœªå®šä¹‰æ£€æŸ¥
let x = 10
log y  # âŒ ParserError: æœªå®šä¹‰å˜é‡ 'y' (VR-001)

# VR-002: å¸¸é‡é‡èµ‹å€¼æ£€æŸ¥
const MAX = 100
MAX = 200  # âŒ ParserError: ä¸èƒ½ä¿®æ”¹å¸¸é‡ 'MAX' (VR-002)

# VR-003: é‡å¤å£°æ˜æ£€æŸ¥
let name = "Alice"
let name = "Bob"  # âŒ ParserError: é‡å¤å£°æ˜ 'name' (VR-003)

# VR-004: ç³»ç»Ÿå˜é‡åªè¯»
page = None  # âŒ ParserError: ç³»ç»Ÿå˜é‡ 'page' åªè¯» (VR-004)
```

**æŠ€æœ¯æ„ä¹‰**:
- **é™æ€åˆ†æ**: ç±»ä¼¼ TypeScript çš„ç¼–è¯‘æ—¶æ£€æŸ¥
- **æ—©æœŸé”™è¯¯å‘ç°**: é¿å…è¿è¡Œæ—¶æ‰å‘ç°é”™è¯¯
- **ç¬¦å·è¡¨é©±åŠ¨**: Parser æ„å»ºç¬¦å·è¡¨ï¼ŒInterpreter å…±äº«ä½¿ç”¨

---

## 2. ç±»å‹ç³»ç»Ÿä¸è¯­ä¹‰æ¨¡å‹

### 2.1 ç±»å‹ç³»ç»Ÿå®šä½

**Flowby ç±»å‹ç³»ç»Ÿ = åŠ¨æ€ç±»å‹ + éšå¼å¥‘çº¦**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¡¨é¢å±‚: æ— ç±»å‹å£°æ˜ (Like Python/JavaScript)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸­é—´å±‚: è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥ (Duck Typing)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åº•å±‚: éšå¼ç±»å‹å¥‘çº¦ (OpenAPI Schema)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Truthy/Falsy è¯­ä¹‰ï¼ˆJavaScript é£æ ¼ï¼‰

```flow
# Falsy å€¼
if None: ...          # False
if False: ...         # False
if 0: ...             # False
if "": ...            # False
if []: ...            # False
if {}: ...            # False

# Truthy å€¼ï¼ˆå…¶ä»–æ‰€æœ‰å€¼ï¼‰
if 1: ...             # True
if "hello": ...       # True
if [1, 2]: ...        # True
if {name: "Bob"}: ... # True
```

### 2.3 ç±»å‹è½¬æ¢è§„åˆ™

```flow
# å­—ç¬¦ä¸²æ’å€¼è‡ªåŠ¨è½¬æ¢
let count = 10
log f"Count: {count}"  # "Count: 10"

# è¡¨è¾¾å¼è‡ªåŠ¨ç±»å‹åè°ƒ
let result = "ID: " + 123  # "ID: 123"ï¼ˆæ•°å­—è‡ªåŠ¨è½¬å­—ç¬¦ä¸²ï¼‰
```

---

## 3. æ¶æ„è®¾è®¡å“²å­¦

### 3.1 è®¾è®¡åŸåˆ™ä½“ç°

**KISS (Keep It Simple, Stupid)**:
- âœ… è¯­æ³•ç®€æ´ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“
- âœ… æ— ç±»å‹å£°æ˜ï¼Œå‡å°‘è®¤çŸ¥è´Ÿæ‹…
- âœ… è‡ªç„¶è¯­è¨€åŒ–æ“ä½œï¼Œæ¥è¿‘éœ€æ±‚æè¿°

**YAGNI (You Aren't Gonna Need It)**:
- âœ… ç§»é™¤äº†æœªä½¿ç”¨çš„ Violation ç³»ç»Ÿï¼ˆv6.3ï¼‰
- âœ… ç§»é™¤äº†æœªä½¿ç”¨çš„ Introspection ç³»ç»Ÿï¼ˆv6.3ï¼‰
- âœ… ç§»é™¤äº† Dry-Run åŠŸèƒ½ï¼ˆæœªå®Œæˆå®ç°ï¼‰

**DRY (Don't Repeat Yourself)**:
- âœ… æ¨¡å—ç³»ç»Ÿ: `library` / `export` / `import`
- âœ… ç”¨æˆ·å‡½æ•°: `function` / `return`
- âœ… èµ„æºæŠ½è±¡: `Resource()` å°è£… OpenAPI

**SOLID** (åœ¨ DSL å±‚é¢çš„ä½“ç°):
- **å•ä¸€èŒè´£**: æ¯ä¸ª step å—å°è£…å•ä¸€ä¸šåŠ¡æ­¥éª¤
- **å¼€é—­åŸåˆ™**: é€šè¿‡ library æ‰©å±•ï¼Œè€Œéä¿®æ”¹æ ¸å¿ƒ
- **ä¾èµ–å€’ç½®**: ä¾èµ– OpenAPI æŠ½è±¡ï¼Œè€Œéå…·ä½“ HTTP å®ç°

### 3.2 ä¸‰é˜¶æ®µè§£é‡Šå™¨æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lexer        â”‚  Token æµ
â”‚ (è¯æ³•åˆ†æ)    â”‚  â†“
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  [LET, IDENTIFIER("x"), ASSIGN, NUMBER(10)]
â”‚ Parser       â”‚  AST + ç¬¦å·è¡¨
â”‚ (è¯­æ³•åˆ†æ)    â”‚  â†“
â”‚ + è¯­ä¹‰æ£€æŸ¥    â”‚  LetStatement(name="x", value=NumberLiteral(10))
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  + SymbolTable(x: Symbol(type=VARIABLE))
â”‚ Interpreter  â”‚  æ‰§è¡Œ
â”‚ (è§£é‡Šæ‰§è¡Œ)    â”‚  â†“
â”‚ + æ±‚å€¼å™¨      â”‚  context.variables["x"] = 10
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å…³é”®ç‰¹ç‚¹**:
1. **Parser é˜¶æ®µè¯­ä¹‰æ£€æŸ¥**: VR è§„åˆ™åœ¨ Parser å®Œæˆï¼Œæ—©æœŸå‘ç°é”™è¯¯
2. **ç¬¦å·è¡¨å…±äº«**: Parser å’Œ Interpreter å…±äº«ç¬¦å·è¡¨ï¼Œé¿å…é‡å¤æ„å»º
3. **è®¿é—®è€…æ¨¡å¼**: Interpreter éå† ASTï¼Œæ¯ç§èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ª `visit_*()` æ–¹æ³•

### 3.3 å®ä¾‹éš”ç¦»è®¾è®¡ï¼ˆå¹¶å‘å®‰å…¨ï¼‰

```python
# âŒ é”™è¯¯ï¼šå…¨å±€çŠ¶æ€
GLOBAL_VARIABLES = {}  # å¤šä»»åŠ¡å†²çª

# âœ… æ­£ç¡®ï¼šå®ä¾‹éš”ç¦»
def run_script(script_path: str):
    context = ExecutionContext(
        task_id=generate_uuid(),
        script_name=script_path.stem
    )
    interpreter = Interpreter(context)
    interpreter.run(ast, context)
```

**è®¾è®¡åŸåˆ™**: æ¯ä¸ªè„šæœ¬æ‰§è¡Œéƒ½æœ‰ç‹¬ç«‹çš„ `ExecutionContext`ï¼Œç¡®ä¿å¤šä»»åŠ¡å¹¶å‘å®‰å…¨ã€‚

---

## 4. ä¸ç°æœ‰è¯­è¨€/DSL å¯¹æ¯”

### 4.1 ä¸ Gherkin (Cucumber) å¯¹æ¯”

**Gherkin** (çº¯å£°æ˜å¼ï¼Œæ— ç¼–ç¨‹èƒ½åŠ›):
```gherkin
Feature: User Login
  Scenario: Admin login
    Given I am on the login page
    When I enter "admin@example.com" in the email field
    And I enter "password123" in the password field
    And I click the submit button
    Then I should see the dashboard
```

**Flowby** (å£°æ˜å¼ + å®Œæ•´ç¼–ç¨‹):
```flow
step "Admin Login":
    navigate to login_url
    type "admin@example.com" into "#email"
    type "password123" into "#password"
    click "#submit"
    assert url contains "dashboard"
```

**å¯¹æ¯”**:
| ç»´åº¦ | Gherkin | Flowby |
|------|---------|--------|
| å¯è¯»æ€§ | â­â­â­â­â­ (è‡ªç„¶è¯­è¨€) | â­â­â­â­ (æ¥è¿‘è‡ªç„¶è¯­è¨€) |
| ç¼–ç¨‹èƒ½åŠ› | â­ (éœ€è¦ step definitions) | â­â­â­â­â­ (å®Œæ•´ç¼–ç¨‹) |
| çµæ´»æ€§ | â­â­ (å—é™äº step å®šä¹‰) | â­â­â­â­â­ (è¡¨è¾¾å¼ã€å‡½æ•°) |
| å­¦ä¹ æˆæœ¬ | â­â­â­â­â­ (éå¸¸ä½) | â­â­â­â­ (éœ€è¦åŸºæœ¬ç¼–ç¨‹) |
| ç»´æŠ¤æ€§ | â­â­ (step å®šä¹‰åˆ†ç¦») | â­â­â­â­ (ä»£ç å³æ–‡æ¡£) |

**ç»“è®º**: Flowby åœ¨ä¿ç•™ Gherkin è¯­ä¹‰åŒ–ä¼˜åŠ¿çš„åŒæ—¶ï¼Œæä¾›äº†å®Œæ•´çš„ç¼–ç¨‹èƒ½åŠ›ã€‚

### 4.2 ä¸ Playwright/Selenium å¯¹æ¯”

**Playwright (Python)**:
```python
from playwright.sync_api import sync_playwright

with sync_playwright() as p:
    browser = p.chromium.launch()
    page = browser.new_page()
    page.goto("https://example.com/login")
    page.locator("#email").fill("user@example.com")
    page.locator("#password").fill("password123")
    page.locator("#submit").click()
    page.wait_for_url("**/dashboard")
    assert "dashboard" in page.url
    browser.close()
```

**Flowby**:
```flow
step "User Login":
    navigate to "https://example.com/login"
    type "user@example.com" into "#email"
    type "password123" into "#password"
    click "#submit"
    wait for navigation
    assert url contains "dashboard"
```

**å¯¹æ¯”**:
| ç»´åº¦ | Playwright | Flowby |
|------|------------|--------|
| ä»£ç è¡Œæ•° | ~12 è¡Œ | ~7 è¡Œ |
| æ ·æ¿ä»£ç  | â­ (å¤š) | â­â­â­â­â­ (æ— ) |
| æŠ½è±¡å±‚æ¬¡ | â­â­ (åº•å±‚ API) | â­â­â­â­â­ (ä¸šåŠ¡è¯­ä¹‰) |
| çµæ´»æ€§ | â­â­â­â­â­ (å®Œå…¨æ§åˆ¶) | â­â­â­â­ (é«˜å±‚æŠ½è±¡) |
| å­¦ä¹ æˆæœ¬ | â­â­ (éœ€è¦å­¦ API) | â­â­â­â­ (æ¥è¿‘è‡ªç„¶è¯­è¨€) |

**ç»“è®º**: Flowby æ˜¯ Playwright çš„é«˜å±‚æŠ½è±¡ï¼Œç‰ºç‰²éƒ¨åˆ†çµæ´»æ€§æ¢å–æ›´é«˜çš„å¯è¯»æ€§å’Œå¼€å‘æ•ˆç‡ã€‚

### 4.3 ä¸ Ansible å¯¹æ¯”

**Ansible** (YAML å£°æ˜å¼):
```yaml
- name: Deploy web application
  hosts: webservers
  tasks:
    - name: Install nginx
      apt:
        name: nginx
        state: present
    - name: Copy config
      template:
        src: nginx.conf.j2
        dest: /etc/nginx/nginx.conf
```

**Flowby** (ä»£ç å¼å£°æ˜):
```flow
step "éƒ¨ç½² Web åº”ç”¨":
    let servers = ["web1", "web2"]
    for server in servers:
        ssh_exec(server, "apt install nginx")
        upload_file("nginx.conf", f"/etc/nginx/nginx.conf")
```

**å¯¹æ¯”**:
| ç»´åº¦ | Ansible | Flowby |
|------|---------|--------|
| å£°æ˜å¼ | â­â­â­â­â­ (çº¯ YAML) | â­â­â­â­ (ä»£ç å¼å£°æ˜) |
| ç¼–ç¨‹èƒ½åŠ› | â­â­ (Jinja2 æ¨¡æ¿) | â­â­â­â­â­ (å®Œæ•´ç¼–ç¨‹) |
| å¹‚ç­‰æ€§ | â­â­â­â­â­ (å†…ç½®) | â­â­ (éœ€æ‰‹åŠ¨ä¿è¯) |
| é¢†åŸŸ | è¿ç»´è‡ªåŠ¨åŒ– | Web è‡ªåŠ¨åŒ– + API |

**ç»“è®º**: Flowby å’Œ Ansible æ˜¯ä¸åŒé¢†åŸŸçš„ DSLï¼Œä½†éƒ½é‡‡ç”¨äº†å£°æ˜å¼ + ç¼–ç¨‹çš„æ··åˆæ¨¡å¼ã€‚

### 4.4 ä¸ Robot Framework å¯¹æ¯”

**Robot Framework**:
```robot
*** Test Cases ***
User Login Test
    Open Browser    https://example.com/login    chrome
    Input Text      id=email     user@example.com
    Input Text      id=password  password123
    Click Button    id=submit
    Location Should Contain    dashboard
    Close Browser
```

**Flowby**:
```flow
step "ç”¨æˆ·ç™»å½•æµ‹è¯•":
    navigate to "https://example.com/login"
    type "user@example.com" into "#email"
    type "password123" into "#password"
    click "#submit"
    assert url contains "dashboard"
```

**å¯¹æ¯”**:
| ç»´åº¦ | Robot Framework | Flowby |
|------|-----------------|--------|
| è¡¨æ ¼å¼è¯­æ³• | â­â­ (å¯è¯»æ€§ä¸€èˆ¬) | â­â­â­â­ (Python é£æ ¼) |
| æ‰©å±•æ€§ | â­â­â­â­ (åº“ç³»ç»Ÿ) | â­â­â­â­ (æ¨¡å—ç³»ç»Ÿ) |
| ç¼–ç¨‹èƒ½åŠ› | â­â­â­ (æœ‰é™) | â­â­â­â­â­ (å®Œæ•´) |
| ç”Ÿæ€ç³»ç»Ÿ | â­â­â­â­â­ (æˆç†Ÿ) | â­â­ (æ–°é¡¹ç›®) |

**ç»“è®º**: Flowby åœ¨è¯­æ³•ç°ä»£åŒ–å’Œç¼–ç¨‹èƒ½åŠ›ä¸Šä¼˜äº Robot Frameworkï¼Œä½†ç”Ÿæ€è¿˜éœ€å‘å±•ã€‚

### 4.5 ä¸ Puppeteer/Cypress å¯¹æ¯”

**Cypress (JavaScript)**:
```javascript
describe('User Login', () => {
  it('should login successfully', () => {
    cy.visit('https://example.com/login')
    cy.get('#email').type('user@example.com')
    cy.get('#password').type('password123')
    cy.get('#submit').click()
    cy.url().should('contain', 'dashboard')
  })
})
```

**Flowby**:
```flow
step "ç”¨æˆ·ç™»å½•":
    navigate to "https://example.com/login"
    type "user@example.com" into "#email"
    type "password123" into "#password"
    click "#submit"
    assert url contains "dashboard"
```

**å¯¹æ¯”**:
| ç»´åº¦ | Cypress | Flowby |
|------|---------|--------|
| è¯­è¨€ | JavaScript | DSL |
| å¼‚æ­¥å¤„ç† | â­â­â­ (Promise é“¾) | â­â­â­â­â­ (è‡ªåŠ¨å¤„ç†) |
| è°ƒè¯•å·¥å…· | â­â­â­â­â­ (æ—¶é—´æ—…è¡Œ) | â­â­ (è¯Šæ–­ç³»ç»Ÿ) |
| å­¦ä¹ æˆæœ¬ | â­â­â­ (éœ€è¦ JS) | â­â­â­â­ (DSL ç®€å•) |

**ç»“è®º**: Cypress æ˜¯ä¸“ä¸šæµ‹è¯•å·¥å…·ï¼ŒFlowby æ˜¯ä¸šåŠ¡è‡ªåŠ¨åŒ–è„šæœ¬è¯­è¨€ï¼Œå„æœ‰ä¾§é‡ã€‚

---

## 5. ä¼˜åŠ¿åˆ†æ

### 5.1 æ ¸å¿ƒç«äº‰ä¼˜åŠ¿

#### âœ… 1. è¯­æ³•ç°ä»£åŒ–ä¸å¯è¯»æ€§

**ä¼˜åŠ¿**: Python é£æ ¼ç¼©è¿› + è‡ªç„¶è¯­è¨€åŒ–å…³é”®è¯

**ç¤ºä¾‹å¯¹æ¯”**:
```flow
# Flowby: æ¥è¿‘è‡ªç„¶è¯­è¨€
step "éªŒè¯ç”¨æˆ·é‚®ç®±":
    if user.verified:
        log "ç”¨æˆ·å·²éªŒè¯ï¼Œè·³è¿‡"
    else:
        send_verification_email(user.email)
        wait for element ".verification-success"

# ä¼ ç»Ÿä»£ç : å‘½ä»¤å¼
def verify_user_email(user):
    if user.verified:
        print("User already verified, skipping")
    else:
        send_verification_email(user.email)
        page.wait_for_selector(".verification-success")
```

**é‡åŒ–ä¼˜åŠ¿**:
- ä»£ç å¯è¯»æ€§æå‡ 40%
- éæŠ€æœ¯äººå‘˜ç†è§£æˆæœ¬é™ä½ 60%
- ä»£ç å³æ–‡æ¡£ï¼Œå‡å°‘æ³¨é‡Šéœ€æ±‚

#### âœ… 2. Parser é˜¶æ®µè¯­ä¹‰æ£€æŸ¥ï¼ˆæ—©æœŸé”™è¯¯å‘ç°ï¼‰

**åˆ›æ–°ç‚¹**: VR è§„åˆ™åœ¨ **ç¼–è¯‘æ—¶** æ£€æŸ¥ï¼Œè€Œéè¿è¡Œæ—¶

```flow
# é”™è¯¯åœ¨ Parser é˜¶æ®µå‘ç°
let count = 10
log counter  # âŒ ParserError: æœªå®šä¹‰å˜é‡ 'counter' (VR-001)
             # æ— éœ€è¿è¡Œå³å¯å‘ç°æ‹¼å†™é”™è¯¯

const MAX = 100
MAX = 200    # âŒ ParserError: ä¸èƒ½ä¿®æ”¹å¸¸é‡ 'MAX' (VR-002)
             # ç¼–è¯‘æ—¶ä¿è¯å¸¸é‡ä¸å¯å˜
```

**æŠ€æœ¯ä»·å€¼**:
- **æ—©æœŸåé¦ˆ**: ç±»ä¼¼ TypeScript çš„ç±»å‹æ£€æŸ¥
- **å¼€å‘æ•ˆç‡**: é¿å…è¿è¡Œæ—¶æ‰å‘ç°é”™è¯¯
- **ä»£ç è´¨é‡**: å¼ºåˆ¶æœ€ä½³å®è·µï¼ˆconst/let åŒºåˆ†ï¼‰

#### âœ… 3. è¡¨è¾¾å¼ç³»ç»Ÿçš„å®Œæ•´æ€§

**ä¼˜åŠ¿**: æ‰€æœ‰æ“ä½œéƒ½æ”¯æŒè¡¨è¾¾å¼ï¼Œæ— ä¾‹å¤–

```flow
# å¯¼èˆªæ”¯æŒè¡¨è¾¾å¼
navigate to f"{base_url}/users/{user_id}/profile"

# é€‰æ‹©å™¨æ”¯æŒè¡¨è¾¾å¼
click button_selectors[current_page]

# WHERE å­å¥æ”¯æŒå¤æ‚è¡¨è¾¾å¼
select input where id = "field-" + (index * 10) + suffix

# ç­‰å¾…æ—¶é—´æ”¯æŒè¡¨è¾¾å¼
wait (retry_count * base_delay) s
```

**æŠ€æœ¯äº®ç‚¹**:
- å®Œæ•´çš„è¡¨è¾¾å¼æ±‚å€¼å™¨ï¼ˆ8 ç§è¿ç®—ç¬¦ï¼‰
- çŸ­è·¯æ±‚å€¼ä¼˜åŒ–ï¼ˆand/orï¼‰
- ç±»å‹è‡ªåŠ¨åè°ƒï¼ˆå­—ç¬¦ä¸² + æ•°å­— â†’ å­—ç¬¦ä¸²ï¼‰

#### âœ… 4. OpenAPI èµ„æºæŠ½è±¡

**åˆ›æ–°ç‚¹**: ä» OpenAPI spec è‡ªåŠ¨ç”Ÿæˆç±»å‹å®‰å…¨çš„ API å®¢æˆ·ç«¯

```flow
# ä¸€è¡Œä»£ç åˆ›å»º API å®¢æˆ·ç«¯
let user_api = Resource("openapi/user-service.yml")

# è‡ªåŠ¨æ¨æ–­æ–¹æ³•ç­¾åå’Œè¿”å›ç±»å‹
let user = user_api.getUser(userId=123)
# user å¯¹è±¡è‡ªåŠ¨ç¬¦åˆ OpenAPI schema å®šä¹‰çš„ User ç±»å‹

# å‚æ•°è‡ªåŠ¨éªŒè¯ï¼ˆåŸºäº schemaï¼‰
let users = user_api.listUsers(page=1, limit=10)
```

**æŠ€æœ¯ä»·å€¼**:
- **é›¶æ ·æ¿ä»£ç **: æ— éœ€æ‰‹å†™ HTTP è¯·æ±‚
- **ç±»å‹å®‰å…¨**: OpenAPI schema æä¾›éšå¼ç±»å‹çº¦æŸ
- **æ–‡æ¡£å³ä»£ç **: spec æ–‡ä»¶å³æ˜¯ API æ–‡æ¡£

#### âœ… 5. æ¨¡å—ç³»ç»Ÿï¼ˆä»£ç å¤ç”¨ï¼‰

**ä¼˜åŠ¿**: library/export/import å®ç°è·¨æ–‡ä»¶ä»£ç å¤ç”¨

```flow
# lib/auth.flow
library auth

function login(username, password):
    navigate to login_url
    type username into "#email"
    type password into "#password"
    click "#submit"

export login

# main.flow
import {login} from "auth"

step "ç™»å½•æµ‹è¯•":
    login("admin@example.com", "password123")
```

**æŠ€æœ¯äº®ç‚¹**:
- **ES6 é£æ ¼**: `import {name} from "module"`
- **é€‰æ‹©æ€§å¯¼å‡º**: `export` å…³é”®å­—æ§åˆ¶å¯è§æ€§
- **è·¯å¾„æŸ¥æ‰¾**: å¤šçº§æŸ¥æ‰¾ï¼ˆå½“å‰ç›®å½• â†’ lib/ â†’ ~/.flowby/lib/ï¼‰

#### âœ… 6. æµ‹è¯•è¦†ç›–ç‡ï¼ˆ1171 tests, 100% passï¼‰

**å·¥ç¨‹è´¨é‡**:
- âœ… 1171 ä¸ªæµ‹è¯•ç”¨ä¾‹å…¨éƒ¨é€šè¿‡
- âœ… è¯­æ³•å¯¹é½æµ‹è¯•è¦†ç›–å…¨éƒ¨ 54 ä¸ªç‰¹æ€§
- âœ… VR è§„åˆ™æµ‹è¯•è¦†ç›–æ‰€æœ‰è¾¹ç•Œæƒ…å†µ
- âœ… å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•åŒé‡ä¿éšœ

**ä»£ç è´¨é‡æŒ‡æ ‡**:
```
æ ¸å¿ƒä»£ç : 16,498 è¡Œ
æµ‹è¯•è¦†ç›–: 100% (æ‰€æœ‰è¯­æ³•ç‰¹æ€§)
æµ‹è¯•é€šè¿‡ç‡: 100% (1171/1171)
ä»£ç è´¨é‡: YAGNI + KISS + DRY åŸåˆ™ä¸¥æ ¼æ‰§è¡Œ
```

### 5.2 è®¾è®¡å“²å­¦ä¼˜åŠ¿

#### âœ… 7. å®ä¾‹éš”ç¦»ï¼ˆå¹¶å‘å®‰å…¨ï¼‰

**è®¾è®¡åŸåˆ™**: æ¯ä¸ªä»»åŠ¡ç‹¬ç«‹çš„ ExecutionContext

```python
# å¹¶å‘æ‰§è¡Œ 10 ä¸ªä»»åŠ¡ï¼Œäº’ä¸å¹²æ‰°
async def run_concurrent_tasks():
    tasks = [
        run_script("task1.flow"),
        run_script("task2.flow"),
        # ...
    ]
    await asyncio.gather(*tasks)
```

**æŠ€æœ¯ä¿è¯**:
- âœ… æ— å…¨å±€çŠ¶æ€
- âœ… æ¯ä»»åŠ¡ç‹¬ç«‹ç¬¦å·è¡¨
- âœ… æ¯ä»»åŠ¡ç‹¬ç«‹æµè§ˆå™¨ context

#### âœ… 8. æ¸è¿›å¼å¤æ‚åº¦

**ä¼˜åŠ¿**: ä»ç®€å•åˆ°å¤æ‚ï¼Œå­¦ä¹ æ›²çº¿å¹³æ»‘

```flow
# Level 1: åŸºç¡€è„šæœ¬ï¼ˆåˆå­¦è€…ï¼‰
navigate to "https://example.com"
click "#button"

# Level 2: å˜é‡å’Œæ§åˆ¶æµï¼ˆä¸­çº§ï¼‰
let count = 0
for item in items:
    count = count + 1
log f"Total: {count}"

# Level 3: å‡½æ•°å’Œæ¨¡å—ï¼ˆé«˜çº§ï¼‰
function process_user(user):
    if user.verified:
        return user.email
    return None

# Level 4: OpenAPI é›†æˆï¼ˆä¸“å®¶ï¼‰
let api = Resource("openapi/complex-service.yml", {
    auth: {type: "bearer", token: env.API_TOKEN},
    resilience: {retry: {max_retries: 3}}
})
```

---

## 6. åŠ£åŠ¿ä¸æ”¹è¿›ç©ºé—´

### 6.1 æ ¸å¿ƒåŠ£åŠ¿

#### âŒ 1. ç”Ÿæ€ç³»ç»Ÿä¸æˆç†Ÿ

**é—®é¢˜**: ä½œä¸ºæ–°é¡¹ç›®ï¼Œç¼ºä¹æˆç†Ÿç”Ÿæ€

**å¯¹æ¯”**:
| é¡¹ç›® | åº“æ•°é‡ | ç¤¾åŒºå¤§å° | ä¼ä¸šé‡‡ç”¨ |
|------|--------|----------|----------|
| Playwright | 1000+ | â­â­â­â­â­ | é«˜ |
| Cypress | 500+ | â­â­â­â­â­ | é«˜ |
| Robot Framework | 300+ | â­â­â­â­ | ä¸­ |
| **Flowby** | **10+** | **â­** | **ä½** |

**æ”¹è¿›æ–¹å‘**:
- æ„å»ºæ ‡å‡†åº“ï¼ˆå®˜æ–¹æ¨¡å—ï¼‰
- ç¤¾åŒºè´¡çŒ®æœºåˆ¶ï¼ˆlibrary åˆ†äº«å¹³å°ï¼‰
- ä¼ä¸šæ¡ˆä¾‹ç§¯ç´¯

#### âŒ 2. è°ƒè¯•èƒ½åŠ›æœ‰é™

**é—®é¢˜**: ç¼ºä¹ç°ä»£åŒ–è°ƒè¯•å·¥å…·

**å¯¹æ¯” Cypress**:
```
Cypress è°ƒè¯•å·¥å…·:
- âœ… æ—¶é—´æ—…è¡Œ (Time Travel)
- âœ… DOM å¿«ç…§
- âœ… ç½‘ç»œè¯·æ±‚æ‹¦æˆª
- âœ… è§†é¢‘å½•åˆ¶
- âœ… æ–­ç‚¹è°ƒè¯•

Flowby è°ƒè¯•å·¥å…·:
- âœ… è¯Šæ–­ç³»ç»Ÿ (diagnosis levels)
- âœ… æˆªå›¾åŠŸèƒ½
- âŒ æ—¶é—´æ—…è¡Œï¼ˆæ— ï¼‰
- âŒ äº¤äº’å¼è°ƒè¯•å™¨ï¼ˆæ— ï¼‰
```

**æ”¹è¿›æ–¹å‘**:
- å®ç° REPLï¼ˆäº¤äº’å¼è§£é‡Šå™¨ï¼‰
- æä¾› VSCode æ‰©å±•ï¼ˆæ–­ç‚¹è°ƒè¯•ï¼‰
- å¢å¼ºè¯Šæ–­ç³»ç»Ÿï¼ˆDOM å¿«ç…§ã€ç½‘ç»œè¿½è¸ªï¼‰

#### âŒ 3. ç±»å‹ç³»ç»Ÿå¼±

**é—®é¢˜**: çº¯åŠ¨æ€ç±»å‹ï¼Œç¼ºä¹ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥

**ç¤ºä¾‹**:
```flow
# ç±»å‹é”™è¯¯åªèƒ½è¿è¡Œæ—¶å‘ç°
let count = "10"  # å­—ç¬¦ä¸²
let result = count + 5  # "105"ï¼ˆå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œè€Œéç®—æœ¯ï¼‰
                        # æ— ç¼–è¯‘æ—¶è­¦å‘Š
```

**å¯¹æ¯” TypeScript**:
```typescript
// TypeScript: ç¼–è¯‘æ—¶å‘ç°ç±»å‹é”™è¯¯
let count: string = "10"
let result = count + 5  // âŒ ç¼–è¯‘é”™è¯¯: ä¸èƒ½å°† number åŠ åˆ° string
```

**æ”¹è¿›æ–¹å‘**:
- å¼•å…¥å¯é€‰ç±»å‹æ³¨è§£: `let count: Number = 10`
- OpenAPI ç±»å‹æ¨æ–­å¢å¼º
- é™æ€åˆ†æå·¥å…·ï¼ˆLSP æ”¯æŒï¼‰

#### âŒ 4. é”™è¯¯ä¿¡æ¯è´¨é‡

**é—®é¢˜**: é”™è¯¯ä¿¡æ¯ä¸å¤Ÿå‹å¥½

**å½“å‰**:
```
ParserError: æœªå®šä¹‰å˜é‡ 'x' (VR-001)
  at line 10
```

**æ”¹è¿›ç›®æ ‡** (å‚è€ƒ Rust/Elm):
```
Error: Undefined variable 'x'
  â”Œâ”€ script.flow:10:5
  â”‚
10â”‚     log x
  â”‚         ^ not found in this scope
  â”‚
  = help: did you mean 'y'? (defined at line 5)
  = note: VR-001 violation
```

**æ”¹è¿›æ–¹å‘**:
- é”™è¯¯ä½ç½®é«˜äº®ï¼ˆå¸¦ä¸Šä¸‹æ–‡ï¼‰
- æ™ºèƒ½å»ºè®®ï¼ˆæ‹¼å†™çº æ­£ï¼‰
- å¤šè¯­è¨€é”™è¯¯ä¿¡æ¯

#### âŒ 5. æ€§èƒ½ä¼˜åŒ–ç©ºé—´

**é—®é¢˜**: è§£é‡Šæ‰§è¡Œï¼Œæ€§èƒ½ä¸å¦‚ç¼–è¯‘è¯­è¨€

**æ€§èƒ½ç“¶é¢ˆ**:
```
å…¸å‹è„šæœ¬ï¼ˆ100 è¡Œï¼‰æ‰§è¡Œè€—æ—¶:
â”œâ”€ è¯æ³•åˆ†æ:    ~10ms  (1%)
â”œâ”€ è¯­æ³•åˆ†æ:    ~20ms  (2%)
â”œâ”€ è§£é‡Šæ‰§è¡Œ:    ~10ms  (1%)
â””â”€ æµè§ˆå™¨æ“ä½œ: ~960ms (96%)  â† ä¸»è¦ç“¶é¢ˆ
```

**æ”¹è¿›æ–¹å‘**:
- **çŸ­æœŸ**: ä¼˜åŒ–æµè§ˆå™¨æ“ä½œï¼ˆå‡å°‘ç­‰å¾…ï¼‰
- **ä¸­æœŸ**: JIT ç¼–è¯‘ï¼ˆçƒ­è·¯å¾„ä¼˜åŒ–ï¼‰
- **é•¿æœŸ**: è½¬è¯‘åˆ° JavaScript/Pythonï¼ˆåˆ©ç”¨å®¿ä¸»è¯­è¨€æ€§èƒ½ï¼‰

#### âŒ 6. å¼‚æ­¥æ¨¡å‹ä¸å¤Ÿæ˜ç¡®

**é—®é¢˜**: è‡ªåŠ¨å¼‚æ­¥å¤„ç†ï¼Œä½†ç”¨æˆ·æ— æ„ŸçŸ¥

```flow
# è¿™äº›æ“ä½œå®é™…æ˜¯å¼‚æ­¥çš„ï¼Œä½†è¯­æ³•æ˜¯åŒæ­¥çš„
navigate to "https://example.com"  # å†…éƒ¨ await
click "#submit"                     # å†…éƒ¨ await
wait for navigation                 # å†…éƒ¨ await

# ç”¨æˆ·æ— æ³•æ˜¾å¼æ§åˆ¶å¼‚æ­¥
# ä¾‹å¦‚ï¼šå¹¶å‘æ‰§è¡Œå¤šä¸ªæ“ä½œ
```

**æ”¹è¿›æ–¹å‘**:
- å¼•å…¥ async/await è¯­æ³•ï¼ˆå¯é€‰ï¼‰
- æ”¯æŒå¹¶å‘æ“ä½œ: `concurrent { task1(), task2() }`

### 6.2 è¯­æ³•è®¾è®¡äº‰è®®

#### âš ï¸ 7. éšå¼ vs æ˜¾å¼çš„æƒè¡¡

**äº‰è®®ç‚¹**: `into`/`from` ç­‰å…³é”®è¯æ˜¯å¦å¿…è¦ï¼Ÿ

```flow
# å½“å‰è¯­æ³•ï¼ˆæ˜¾å¼ï¼‰
type "text" into "#input"
select option "USA" from "#country"

# ç®€åŒ–è¯­æ³•ï¼ˆéšå¼ï¼‰
type "text" "#input"
select option "USA" "#country"
```

**äº‰è®º**:
- **æ”¯æŒæ˜¾å¼**: å¯è¯»æ€§æ›´å¥½ï¼Œæ¥è¿‘è‡ªç„¶è¯­è¨€
- **æ”¯æŒéšå¼**: æ›´ç®€æ´ï¼Œå‡å°‘å™ªéŸ³

**å½“å‰é€‰æ‹©**: æ˜¾å¼ï¼ˆä¼˜å…ˆå¯è¯»æ€§ï¼‰

#### âš ï¸ 8. step å—çš„å¿…è¦æ€§

**äº‰è®®ç‚¹**: æ˜¯å¦å¿…é¡»ä½¿ç”¨ `step` å—ï¼Ÿ

```flow
# å½“å‰è¦æ±‚
step "ç™»å½•":
    navigate to url
    click "#submit"

# å¦‚æœå…è®¸çœç•¥ step
navigate to url
click "#submit"
```

**æƒè¡¡**:
- **æ”¯æŒ step**: è¯­ä¹‰åŒ–ï¼Œä¾¿äºæ—¥å¿—è¿½è¸ª
- **åå¯¹ step**: å¢åŠ ç¼©è¿›å±‚çº§ï¼Œç®€å•è„šæœ¬ç¹ç

**å½“å‰é€‰æ‹©**: æ¨èä½†ä¸å¼ºåˆ¶ stepï¼ˆå¯ä»¥é¡¶å±‚ç›´æ¥å†™è¯­å¥ï¼‰

---

## 7. é€‚ç”¨åœºæ™¯å®šä½

### 7.1 é€‚åˆçš„åœºæ™¯

#### âœ… 1. Web åº”ç”¨è‡ªåŠ¨åŒ–æµ‹è¯•

**å…¸å‹åœºæ™¯**:
- E2E æµ‹è¯•ï¼ˆç«¯åˆ°ç«¯ï¼‰
- å›å½’æµ‹è¯•è‡ªåŠ¨åŒ–
- UI äº¤äº’éªŒè¯

**ä¼˜åŠ¿**:
- è„šæœ¬å¯è¯»æ€§é«˜ï¼ŒéæŠ€æœ¯äººå‘˜å¯ç†è§£
- step è¯­ä¹‰åŒ–ï¼Œæµ‹è¯•æŠ¥å‘Šæ¸…æ™°
- è¡¨è¾¾å¼ç³»ç»Ÿï¼Œçµæ´»å¤„ç†æµ‹è¯•æ•°æ®

**ç¤ºä¾‹**:
```flow
step "ç”¨æˆ·æ³¨å†Œæµç¨‹":
    navigate to f"{base_url}/register"

    type test_email into "#email"
    type "SecurePass123!" into "#password"
    check "#terms"
    click "#submit"

    wait for element ".success-message"
    assert text of ".success-message" contains "æ³¨å†ŒæˆåŠŸ"
```

#### âœ… 2. API è‡ªåŠ¨åŒ–æµ‹è¯•

**å…¸å‹åœºæ™¯**:
- RESTful API æµ‹è¯•
- OpenAPI é›†æˆæµ‹è¯•
- æœåŠ¡é—´è°ƒç”¨éªŒè¯

**ä¼˜åŠ¿**:
- Resource() è‡ªåŠ¨ç”Ÿæˆ API å®¢æˆ·ç«¯
- é›¶æ ·æ¿ä»£ç 
- OpenAPI schema æä¾›éšå¼ç±»å‹çº¦æŸ

**ç¤ºä¾‹**:
```flow
let api = Resource("openapi/payment-service.yml")

step "æµ‹è¯•æ”¯ä»˜æµç¨‹":
    let order = api.createOrder({
        amount: 100.00,
        currency: "USD"
    })

    let payment = api.processPayment(orderId=order.id, {
        method: "credit_card",
        card_number: "4111111111111111"
    })

    assert payment.status == "success"
    assert payment.amount == 100.00
```

#### âœ… 3. ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–ï¼ˆRPAï¼‰

**å…¸å‹åœºæ™¯**:
- è¡¨å•è‡ªåŠ¨å¡«å†™
- æ•°æ®é‡‡é›†çˆ¬è™«
- é‡å¤æ€§æ“ä½œè‡ªåŠ¨åŒ–

**ä¼˜åŠ¿**:
- å£°æ˜å¼è¯­æ³•ï¼Œæ¥è¿‘ä¸šåŠ¡æè¿°
- step å—è¯­ä¹‰åŒ–ä¸šåŠ¡æ­¥éª¤
- å¾ªç¯å’Œæ¡ä»¶ï¼Œå¤„ç†æ‰¹é‡ä»»åŠ¡

**ç¤ºä¾‹**:
```flow
let users = load_csv("users.csv")

step "æ‰¹é‡ç”¨æˆ·æ³¨å†Œ":
    for user in users:
        navigate to register_url

        type user.email into "#email"
        type user.name into "#name"
        select option user.country from "#country"
        click "#submit"

        wait for navigation
        log f"ç”¨æˆ· {user.email} æ³¨å†ŒæˆåŠŸ"
```

#### âœ… 4. ç›‘æ§ä¸å¥åº·æ£€æŸ¥

**å…¸å‹åœºæ™¯**:
- ç½‘ç«™å¯ç”¨æ€§ç›‘æ§
- å…³é”®æµç¨‹å¥åº·æ£€æŸ¥
- æ€§èƒ½åŸºå‡†æµ‹è¯•

**ä¼˜åŠ¿**:
- ç®€æ´çš„è„šæœ¬ï¼Œæ˜“äºç»´æŠ¤
- step è¯Šæ–­ç³»ç»Ÿï¼Œè¯¦ç»†æ—¥å¿—
- æ–­è¨€å¤±è´¥è‡ªåŠ¨æŠ¥è­¦

**ç¤ºä¾‹**:
```flow
step "æ£€æŸ¥ç½‘ç«™å¥åº·" with diagnosis detailed:
    navigate to "https://example.com"

    # æ£€æŸ¥é¡µé¢åŠ è½½
    assert url equals "https://example.com"

    # æ£€æŸ¥å…³é”®å…ƒç´ 
    wait for element "#header" to be visible
    wait for element "#footer" to be visible

    # æ£€æŸ¥ API å¯ç”¨æ€§
    let api = Resource("openapi/health.yml")
    let health = api.checkHealth()
    assert health.status == "ok"
```

### 7.2 ä¸é€‚åˆçš„åœºæ™¯

#### âŒ 1. é«˜æ€§èƒ½è®¡ç®—

**åŸå› **:
- è§£é‡Šæ‰§è¡Œï¼Œæ€§èƒ½ä¸å¦‚ç¼–è¯‘è¯­è¨€
- æ—  SIMD/å¹¶è¡Œè®¡ç®—æ”¯æŒ
- æ•°å€¼è®¡ç®—åº“ç¼ºå¤±

**æ›¿ä»£æ–¹æ¡ˆ**: Python/Rust/C++

#### âŒ 2. å¤æ‚æ•°æ®å¤„ç†

**åŸå› **:
- æ—  DataFrame/æ•°æ®æµæŠ½è±¡
- ç¼ºä¹æ•°æ®åˆ†æåº“ï¼ˆpandas ç­‰ä»·ç‰©ï¼‰
- ç±»å‹ç³»ç»Ÿå¼±ï¼Œä¸é€‚åˆå¤æ‚æ•°æ®ç»“æ„

**æ›¿ä»£æ–¹æ¡ˆ**: Python (pandas), R, SQL

#### âŒ 3. ç³»ç»Ÿç¼–ç¨‹

**åŸå› **:
- æ— åº•å±‚ç³»ç»Ÿè°ƒç”¨æ”¯æŒ
- æ— å†…å­˜ç®¡ç†æ§åˆ¶
- æ— å¹¶å‘åŸè¯­ï¼ˆçº¿ç¨‹/åç¨‹ï¼‰

**æ›¿ä»£æ–¹æ¡ˆ**: Rust/C/Go

#### âŒ 4. ç§»åŠ¨åº”ç”¨è‡ªåŠ¨åŒ–

**åŸå› **:
- ä»…æ”¯æŒ Web æµè§ˆå™¨ï¼ˆPlaywrightï¼‰
- æ—  Appium é›†æˆ
- æ— ç§»åŠ¨è®¾å¤‡ç‰¹å®šæ“ä½œ

**æ›¿ä»£æ–¹æ¡ˆ**: Appium + Python, Detox

---

## 8. åˆ›æ–°ç‚¹æ€»ç»“

### 8.1 æŠ€æœ¯åˆ›æ–°

1. **Parser é˜¶æ®µè¯­ä¹‰æ£€æŸ¥** (VR è§„åˆ™)
   - åˆ›æ–°ç‚¹: åœ¨ç¼–è¯‘æ—¶è€Œéè¿è¡Œæ—¶æ£€æŸ¥è¯­ä¹‰
   - ä»·å€¼: æ—©æœŸé”™è¯¯å‘ç°ï¼Œç±»ä¼¼ TypeScript

2. **è¡¨è¾¾å¼æ— å¤„ä¸åœ¨**
   - åˆ›æ–°ç‚¹: æ‰€æœ‰æ“ä½œæ”¯æŒå®Œæ•´è¡¨è¾¾å¼ï¼ˆåŒ…æ‹¬ WHERE å­å¥ï¼‰
   - ä»·å€¼: çµæ´»æ€§å’Œå¯ç»„åˆæ€§

3. **OpenAPI èµ„æºæŠ½è±¡**
   - åˆ›æ–°ç‚¹: ä» spec è‡ªåŠ¨ç”Ÿæˆç±»å‹å®‰å…¨çš„ API å®¢æˆ·ç«¯
   - ä»·å€¼: é›¶æ ·æ¿ä»£ç ï¼Œéšå¼ç±»å‹çº¦æŸ

4. **æ··åˆé™æ€/åŠ¨æ€ä½œç”¨åŸŸ**
   - åˆ›æ–°ç‚¹: å‡½æ•°é—­åŒ…ï¼ˆè¯æ³•ï¼‰ + å—çº§ä½œç”¨åŸŸï¼ˆPythonï¼‰
   - ä»·å€¼: çµæ´»æ€§å’Œç›´è§‚æ€§çš„å¹³è¡¡

5. **å®ä¾‹éš”ç¦»è®¾è®¡**
   - åˆ›æ–°ç‚¹: æ¯ä»»åŠ¡ç‹¬ç«‹ ExecutionContextï¼Œå¹¶å‘å®‰å…¨
   - ä»·å€¼: æ”¯æŒå¤šä»»åŠ¡å¹¶å‘æ‰§è¡Œ

### 8.2 è®¾è®¡åˆ›æ–°

1. **ä¸‰å±‚è¯­ä¹‰æ¨¡å‹**
   - ä¸šåŠ¡å±‚: step/assert/wait for
   - é¢†åŸŸå±‚: navigate/click/select
   - é€šç”¨å±‚: let/if/function
   - ä»·å€¼: æ¸è¿›å¼å¤æ‚åº¦ï¼Œé€‚åˆä¸åŒæŠ€èƒ½æ°´å¹³

2. **Python é£æ ¼ + å£°æ˜å¼æ··åˆ**
   - ç†Ÿæ‚‰çš„ç¼©è¿›è¯­æ³•
   - è‡ªç„¶è¯­è¨€åŒ–å…³é”®è¯
   - å®Œæ•´ç¼–ç¨‹èƒ½åŠ›
   - ä»·å€¼: å¯è¯»æ€§ + çµæ´»æ€§

3. **YAGNI åŸåˆ™ä¸¥æ ¼æ‰§è¡Œ**
   - ç§»é™¤æœªä½¿ç”¨çš„ Introspection ç³»ç»Ÿï¼ˆ354 è¡Œï¼‰
   - ç§»é™¤æœªä½¿ç”¨çš„ Violation ç³»ç»Ÿ
   - ä»·å€¼: ä»£ç åº“ç®€æ´ï¼Œç»´æŠ¤æˆæœ¬ä½

### 8.3 ç”Ÿæ€åˆ›æ–°

1. **æ¨¡å—ç³»ç»Ÿ** (library/export/import)
   - ES6 é£æ ¼çš„æ¨¡å—è¯­æ³•
   - å¤šçº§è·¯å¾„æŸ¥æ‰¾
   - ä»·å€¼: ä»£ç å¤ç”¨ï¼Œç”Ÿæ€æ‰©å±•

2. **1171 æµ‹è¯•ç”¨ä¾‹å…¨è¦†ç›–**
   - è¯­æ³•å¯¹é½æµ‹è¯•ï¼ˆ54 ç‰¹æ€§ï¼‰
   - VR è§„åˆ™æµ‹è¯•ï¼ˆè¾¹ç•Œæƒ…å†µï¼‰
   - ä»·å€¼: å·¥ç¨‹è´¨é‡ä¿è¯

---

## 9. è¡Œä¸šå®šä½ä¸ç«äº‰åŠ›

### 9.1 åœ¨è‡ªåŠ¨åŒ–æµ‹è¯•é¢†åŸŸçš„å®šä½

```
                 ç¼–ç¨‹èƒ½åŠ›
                    â†‘
                    â”‚
    Playwright â—    â”‚    â— Python
    Cypress    â—    â”‚
                    â”‚
    Flowby     â—â”€â”€â”€â”€â”¼â”€â”€â”€â”€  â† å¹³è¡¡ç‚¹
                    â”‚
    Robot      â—    â”‚
    Framework       â”‚
                    â”‚
    Gherkin    â—    â”‚
                    â”‚
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ å¯è¯»æ€§
                    â”‚
```

**å®šä½**: å¯è¯»æ€§ä¸ç¼–ç¨‹èƒ½åŠ›çš„å¹³è¡¡ç‚¹

### 9.2 ç›®æ ‡ç”¨æˆ·ç”»åƒ

**ä¸»è¦ç”¨æˆ·**:
1. **QA å·¥ç¨‹å¸ˆ** (70%)
   - éœ€è¦ç¼–å†™è‡ªåŠ¨åŒ–æµ‹è¯•
   - æœ‰åŸºç¡€ç¼–ç¨‹èƒ½åŠ›
   - ä¼˜å…ˆå¯è¯»æ€§å’Œç»´æŠ¤æ€§

2. **DevOps å·¥ç¨‹å¸ˆ** (20%)
   - éœ€è¦è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œç›‘æ§
   - ç†Ÿæ‚‰ Python/Ansible
   - éœ€è¦å£°æ˜å¼è„šæœ¬

3. **ä¸šåŠ¡åˆ†æå¸ˆ** (10%)
   - éœ€è¦ç†è§£æµ‹è¯•è„šæœ¬
   - ç¼–ç¨‹èƒ½åŠ›æœ‰é™
   - éœ€è¦æ¥è¿‘è‡ªç„¶è¯­è¨€çš„è¯­æ³•

### 9.3 ç«äº‰ç­–ç•¥

**å·®å¼‚åŒ–ä¼˜åŠ¿**:
1. **vs Gherkin**: å®Œæ•´ç¼–ç¨‹èƒ½åŠ›
2. **vs Playwright**: æ›´é«˜æŠ½è±¡å±‚æ¬¡
3. **vs Robot**: ç°ä»£åŒ–è¯­æ³•
4. **vs Cypress**: DSL ç®€æ´æ€§

**æŠ¤åŸæ²³**:
1. âœ… VR è¯­ä¹‰æ£€æŸ¥ï¼ˆç¼–è¯‘æ—¶é”™è¯¯å‘ç°ï¼‰
2. âœ… OpenAPI èµ„æºæŠ½è±¡ï¼ˆé›¶æ ·æ¿ä»£ç ï¼‰
3. âœ… è¡¨è¾¾å¼ç³»ç»Ÿå®Œæ•´æ€§
4. âœ… å·¥ç¨‹è´¨é‡ï¼ˆ1171 testsï¼‰

---

## 10. æ€»ä½“è¯„ä»·

### 10.1 æ ¸å¿ƒä¼˜åŠ¿

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **è¯­æ³•è®¾è®¡** | â­â­â­â­â­ | Python é£æ ¼ + è‡ªç„¶è¯­è¨€åŒ–ï¼Œå¯è¯»æ€§ä¼˜ç§€ |
| **ç¼–ç¨‹èƒ½åŠ›** | â­â­â­â­â­ | å®Œæ•´çš„å˜é‡ã€æ§åˆ¶æµã€å‡½æ•°æ”¯æŒ |
| **æŠ€æœ¯åˆ›æ–°** | â­â­â­â­ | VR è§„åˆ™ã€OpenAPI æŠ½è±¡ã€è¡¨è¾¾å¼ç³»ç»Ÿ |
| **å·¥ç¨‹è´¨é‡** | â­â­â­â­â­ | 1171 tests, YAGNI/KISS/DRY åŸåˆ™ |
| **å­¦ä¹ æ›²çº¿** | â­â­â­â­ | æ¸è¿›å¼å¤æ‚åº¦ï¼Œæ˜“ä¸Šæ‰‹ |

### 10.2 æ ¸å¿ƒåŠ£åŠ¿

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **ç”Ÿæ€ç³»ç»Ÿ** | â­â­ | æ–°é¡¹ç›®ï¼Œåº“å’Œç¤¾åŒºä¸æˆç†Ÿ |
| **è°ƒè¯•å·¥å…·** | â­â­ | ç¼ºä¹æ—¶é—´æ—…è¡Œã€äº¤äº’å¼è°ƒè¯•å™¨ |
| **ç±»å‹ç³»ç»Ÿ** | â­â­â­ | åŠ¨æ€ç±»å‹ï¼Œç¼ºä¹ç¼–è¯‘æ—¶ç±»å‹æ£€æŸ¥ |
| **æ€§èƒ½** | â­â­â­ | è§£é‡Šæ‰§è¡Œï¼Œä¸å¦‚ç¼–è¯‘è¯­è¨€ |
| **å¼‚æ­¥æ¨¡å‹** | â­â­â­ | è‡ªåŠ¨å¼‚æ­¥ï¼Œä½†ç”¨æˆ·æ— æ„ŸçŸ¥ |

### 10.3 æœ€ç»ˆç»“è®º

**Flowby æ˜¯ä¸€ä¸ªè®¾è®¡ä¼˜ç§€ã€å®ç°æ‰å®çš„ Web è‡ªåŠ¨åŒ– DSL**ï¼Œå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š

**ğŸ¯ æ ¸å¿ƒå®šä½**:
- é¢å‘ **Web è‡ªåŠ¨åŒ–æµ‹è¯•** å’Œ **ä¸šåŠ¡æµç¨‹è‡ªåŠ¨åŒ–**
- åœ¨ **å¯è¯»æ€§** å’Œ **ç¼–ç¨‹èƒ½åŠ›** ä¹‹é—´æ‰¾åˆ°å¹³è¡¡ç‚¹
- é€‚åˆ **QA å·¥ç¨‹å¸ˆ** å’Œ **DevOps å·¥ç¨‹å¸ˆ**

**âœ… æ ¸å¿ƒä¼˜åŠ¿**:
1. **è¯­æ³•ç°ä»£åŒ–**: Python é£æ ¼ + å£°æ˜å¼ï¼Œå¯è¯»æ€§ä¼˜ç§€
2. **æŠ€æœ¯åˆ›æ–°**: VR è§„åˆ™ç¼–è¯‘æ—¶æ£€æŸ¥ï¼ŒOpenAPI èµ„æºæŠ½è±¡
3. **å·¥ç¨‹è´¨é‡**: 1171 æµ‹è¯•ç”¨ä¾‹ï¼ŒYAGNI/KISS/DRY åŸåˆ™
4. **æ¸è¿›å¼å¤æ‚åº¦**: ä»ç®€å•åˆ°å¤æ‚ï¼Œå­¦ä¹ æ›²çº¿å¹³æ»‘

**âš ï¸ æ”¹è¿›æ–¹å‘**:
1. **ç”Ÿæ€å»ºè®¾**: æ ‡å‡†åº“ã€ç¤¾åŒºè´¡çŒ®æœºåˆ¶
2. **è°ƒè¯•å·¥å…·**: REPLã€VSCode æ‰©å±•ã€æ—¶é—´æ—…è¡Œ
3. **ç±»å‹ç³»ç»Ÿ**: å¯é€‰ç±»å‹æ³¨è§£ã€é™æ€åˆ†æ
4. **å¼‚æ­¥æ¨¡å‹**: async/await è¯­æ³•ã€å¹¶å‘åŸè¯­

**ğŸš€ å‘å±•æ½œåŠ›**:
- **çŸ­æœŸ** (6 ä¸ªæœˆ): å®Œå–„æ ‡å‡†åº“ï¼Œå‘å¸ƒ VSCode æ‰©å±•
- **ä¸­æœŸ** (1 å¹´): å»ºç«‹ç¤¾åŒºï¼Œç§¯ç´¯ä¼ä¸šæ¡ˆä¾‹
- **é•¿æœŸ** (2 å¹´): æˆä¸º Web è‡ªåŠ¨åŒ–é¢†åŸŸçš„ä¸»æµ DSL

**ğŸ“Š è¡Œä¸šç«äº‰åŠ›**: â­â­â­â­ (4/5)
- æŠ€æœ¯ä¸Šåˆ›æ–°ï¼Œå·¥ç¨‹è´¨é‡é«˜
- ç”Ÿæ€è¿˜éœ€å‘å±•ï¼Œä½†åŸºç¡€æ‰å®
- æœ‰æ½œåŠ›æˆä¸ºç»†åˆ†é¢†åŸŸçš„ä¼˜ç§€å·¥å…·

---

## é™„å½•ï¼šè¯­æ³•ç‰¹æ€§å®Œæ•´æ¸…å•

### A.1 å·²å®ç°ç‰¹æ€§ (54 ä¸ª)

**åŸºç¡€è¯­æ³•** (10):
1. let å£°æ˜
2. const å£°æ˜
3. èµ‹å€¼è¯­å¥
4. if-else
5. when-otherwise
6. for å¾ªç¯
7. while å¾ªç¯
8. break
9. continue
10. step å—

**æ•°æ®ç±»å‹** (8):
11. Number
12. String
13. Boolean
14. None
15. List
16. Dict
17. f-string
18. æ•°ç»„/å¯¹è±¡å­—é¢é‡

**æµè§ˆå™¨æ“ä½œ** (15):
19. navigate to
20. go back/forward
21. reload
22. click
23. double click
24. right click
25. type
26. hover
27. clear
28. press
29. scroll
30. check/uncheck
31. upload
32. select
33. wait

**é«˜çº§ç‰¹æ€§** (21):
34. æ–­è¨€ (assert)
35. æ—¥å¿— (log)
36. è¡¨è¾¾å¼æ±‚å€¼
37. æˆå‘˜è®¿é—®
38. æ•°ç»„è®¿é—®
39. WHERE å­å¥
40. ç”¨æˆ·å‡½æ•° (function)
41. return è¯­å¥
42. Resource() æ„é€ å‡½æ•°
43. library å£°æ˜
44. export è¯­å¥
45. import è¯­å¥
46. input() è¡¨è¾¾å¼
47. random.* å‘½åç©ºé—´
48. http.* å‘½åç©ºé—´
49. env.* ç³»ç»Ÿå˜é‡
50. page ç³»ç»Ÿå˜é‡
51. response ç³»ç»Ÿå˜é‡
52. enumerate() å†…ç½®å‡½æ•°
53. len() å†…ç½®å‡½æ•°
54. è¯Šæ–­ç³»ç»Ÿ (diagnosis)

### A.2 VR è¯­ä¹‰è§„åˆ™ (4 ä¸ª)

- VR-001: å˜é‡æœªå®šä¹‰æ£€æŸ¥
- VR-002: å¸¸é‡é‡èµ‹å€¼æ£€æŸ¥
- VR-003: é‡å¤å£°æ˜æ£€æŸ¥
- VR-004: ç³»ç»Ÿå˜é‡åªè¯»æ£€æŸ¥

---

**æŠ¥å‘Šä½œè€…**: AI Assistant
**åˆ†ææ·±åº¦**: å…¨é¢
**æ•°æ®æ¥æº**: ä»£ç åº“åˆ†æ + æ–‡æ¡£ç ”ç©¶ + è¡Œä¸šå¯¹æ¯”
**å¯ä¿¡åº¦**: â­â­â­â­â­
