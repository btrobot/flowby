# AI 任务目录

**用途：** 存放架构师 AI 创建的详细任务文档，供执行者 AI 批量执行

---

## 目录结构

```
.ai-tasks/
├── README.md                           # 本文件
├── TASK-TEMPLATE.md                     # 任务模板
├── TASK-XXX-task-name.md               # 任务描述文档
└── TASK-XXX-report.md                  # 执行报告
```

---

## 工作流程

### 1. 创建任务（架构师 AI）

```bash
# 分析问题
分析代码库 → 发现需要批量处理的问题

# 创建任务文档
cp .ai-tasks/TASK-TEMPLATE.md .ai-tasks/TASK-XXX-description.md
编辑任务文档 → 详细说明要做什么、怎么做

# 提交任务
将任务文档交给执行者 AI
```

### 2. 执行任务（执行者 AI）

```bash
# 接收任务
读取 .ai-tasks/TASK-XXX-description.md

# 执行修改
严格按照任务文档的指示进行修改

# 验证结果
运行任务文档中的验证脚本

# 编写报告
cp .ai-tasks/TASK-TEMPLATE-report.md .ai-tasks/TASK-XXX-report.md
填写执行统计和遇到的问题
```

### 3. 审查提交（架构师 AI）

```bash
# 审查报告
读取 .ai-tasks/TASK-XXX-report.md

# 检查修改
git diff
运行完整测试

# 提交代码
git add .
git commit -m "..."
git push
```

---

## 任务编号规则

**格式：** `TASK-XXX-short-name`

**示例：**
- `TASK-001-syntax-cleanup` - 语法清理
- `TASK-002-test-fixes` - 测试修复
- `TASK-003-doc-migration` - 文档迁移

---

## 现有任务

### TASK-001：文档语法清理

**状态：** 📋 待执行
**创建时间：** 2025-12-01
**优先级：** 🔴 高
**预计时间：** 95 分钟

**描述：** 清理文档中的 v2.0 旧语法残留（end 关键字、null 字面量）

**文件：**
- 任务描述：`.ai-tasks/TASK-001-syntax-cleanup.md`
- 执行报告：`.ai-tasks/TASK-001-report.md`（待创建）

---

## 任务类型

### Type A：批量文本替换

**适用场景：** 大量重复的简单替换（如重命名、格式化）

**特点：**
- 模式明确
- 风险低
- 可自动化

**示例：**
- 替换关键字
- 统一命名
- 更新版本号

### Type B：结构化重构

**适用场景：** 需要理解代码结构的修改（如拆分函数、提取组件）

**特点：**
- 需要代码理解
- 中等风险
- 部分自动化

**示例：**
- 拆分大函数
- 提取重复逻辑
- 重组模块

### Type C：复杂迁移

**适用场景：** 涉及多个系统的大规模变更（如 API 升级、架构重构）

**特点：**
- 高度复杂
- 高风险
- 需要人工介入

**示例：**
- API 版本升级
- 数据库迁移
- 架构重构

---

## 质量标准

### 任务文档必须包含

- ✅ 清晰的任务描述
- ✅ 详细的执行步骤（step by step）
- ✅ 修改前/后示例
- ✅ 验证方法和脚本
- ✅ 常见问题和解决方案
- ✅ 执行报告模板

### 执行报告必须包含

- ✅ 完整的统计数据
- ✅ 遇到的所有问题
- ✅ 验证脚本的输出
- ✅ 需要人工审查的项目

---

## 最佳实践

### ✅ 推荐做法

1. **任务原子性** - 一个任务只做一件事
2. **详细说明** - 假设执行者完全不了解背景
3. **提供示例** - 每个规则都有 before/after 示例
4. **验证脚本** - 必须提供可运行的验证命令
5. **报告模板** - 标准化报告格式

### ❌ 避免做法

1. **模糊指令** - "修复所有错误"
2. **缺乏示例** - 只说原则不举例
3. **假设知识** - 假设执行者理解业务逻辑
4. **无验证** - 不提供检查方法
5. **范围不清** - 不明确哪些文件需要修改

---

## 紧急情况处理

### 如果执行者 AI 卡住了

1. **停止执行** - 不要继续尝试
2. **保存进度** - 记录已完成的部分
3. **详细报告** - 说明卡在哪里，为什么
4. **等待审查** - 让架构师 AI 介入

### 如果发现任务文档有误

1. **标记问题** - 在报告中明确指出
2. **提出建议** - 如何改进任务文档
3. **不要猜测** - 不确定的地方不要自行决定

---

## 文件命名约定

### 任务文档

```
TASK-{编号}-{简短描述}.md

示例：
TASK-001-syntax-cleanup.md
TASK-002-test-fixes.md
TASK-003-refactor-parser.md
```

### 执行报告

```
TASK-{编号}-report.md

示例：
TASK-001-report.md
TASK-002-report.md
```

### 辅助文件

```
TASK-{编号}-{类型}.{ext}

示例：
TASK-001-verification.sh    # 验证脚本
TASK-001-backup.zip         # 备份文件
TASK-001-diff.txt           # 差异记录
```

---

## 版本控制

### Git 忽略

`.ai-tasks/` 目录中的某些文件应该提交到 Git：

**提交：**
- ✅ `README.md`
- ✅ `TASK-TEMPLATE.md`
- ✅ `TASK-XXX-description.md`（任务文档）
- ✅ `TASK-XXX-report.md`（执行报告）

**不提交：**
- ❌ 备份文件（`*.backup`, `*.bak`）
- ❌ 临时脚本（`temp_*.sh`）
- ❌ 大型数据文件

### 提交消息格式

```
docs(ai-tasks): add TASK-XXX task description

或

docs(ai-tasks): add TASK-XXX execution report
```

---

## 统计

**总任务数：** 1
**已完成：** 0
**进行中：** 0
**待执行：** 1

---

**更新时间：** 2025-12-01
**维护者：** 架构师 AI
